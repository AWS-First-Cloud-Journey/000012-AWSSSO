<!DOCTYPE html>
<html lang="vi" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.99.1" />
    <meta name="description" content="">
<meta name="author" content="journeyoftheaverageguy@gmail.com">

    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>Truy cập qua các AWS Account khác trong Organization :: AWS SINGLE SIGN-ON CHO ORGANIZATION</title>

    
    <link href="/css/nucleus.css?1680274106" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1680274106" rel="stylesheet">
    <link href="/css/hybrid.css?1680274106" rel="stylesheet">
    <link href="/css/featherlight.min.css?1680274106" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1680274106" rel="stylesheet">
    <link href="/css/auto-complete.css?1680274106" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1680274106" rel="stylesheet">
    <link href="/css/theme.css?1680274106" rel="stylesheet">
    <link href="/css/hugo-theme.css?1680274106" rel="stylesheet">
    
    <link href="/css/theme-workshop.css?1680274106" rel="stylesheet">
    
    

    <script src="/js/jquery-3.3.1.min.js?1680274106"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/vi/1-prerequisite/4-switch-role/">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="/">

<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 30" width="30%"><defs><style>.cls-1{fill:#fff;}.cls-2{fill:#f90;fill-rule:evenodd;}</style></defs><title>AWS-Logo_White-Color</title><path class="cls-1" d="M14.09,10.85a4.7,4.7,0,0,0,.19,1.48,7.73,7.73,0,0,0,.54,1.19.77.77,0,0,1,.12.38.64.64,0,0,1-.32.49l-1,.7a.83.83,0,0,1-.44.15.69.69,0,0,1-.49-.23,3.8,3.8,0,0,1-.6-.77q-.25-.42-.51-1a6.14,6.14,0,0,1-4.89,2.3,4.54,4.54,0,0,1-3.32-1.19,4.27,4.27,0,0,1-1.22-3.2A4.28,4.28,0,0,1,3.61,7.75,6.06,6.06,0,0,1,7.69,6.46a12.47,12.47,0,0,1,1.76.13q.92.13,1.91.36V5.73a3.65,3.65,0,0,0-.79-2.66A3.81,3.81,0,0,0,7.86,2.3a7.71,7.71,0,0,0-1.79.22,12.78,12.78,0,0,0-1.79.57,4.55,4.55,0,0,1-.58.22l-.26,0q-.35,0-.35-.52V2a1.09,1.09,0,0,1,.12-.58,1.2,1.2,0,0,1,.47-.35A10.88,10.88,0,0,1,5.77.32,10.19,10.19,0,0,1,8.36,0a6,6,0,0,1,4.35,1.35,5.49,5.49,0,0,1,1.38,4.09ZM7.34,13.38a5.36,5.36,0,0,0,1.72-.31A3.63,3.63,0,0,0,10.63,12,2.62,2.62,0,0,0,11.19,11a5.63,5.63,0,0,0,.16-1.44v-.7a14.35,14.35,0,0,0-1.53-.28,12.37,12.37,0,0,0-1.56-.1,3.84,3.84,0,0,0-2.47.67A2.34,2.34,0,0,0,5,11a2.35,2.35,0,0,0,.61,1.76A2.4,2.4,0,0,0,7.34,13.38Zm13.35,1.8a1,1,0,0,1-.64-.16,1.3,1.3,0,0,1-.35-.65L15.81,1.51a3,3,0,0,1-.15-.67.36.36,0,0,1,.41-.41H17.7a1,1,0,0,1,.65.16,1.4,1.4,0,0,1,.33.65l2.79,11,2.59-11A1.17,1.17,0,0,1,24.39.6a1.1,1.1,0,0,1,.67-.16H26.4a1.1,1.1,0,0,1,.67.16,1.17,1.17,0,0,1,.32.65L30,12.39,32.88,1.25A1.39,1.39,0,0,1,33.22.6a1,1,0,0,1,.65-.16h1.54a.36.36,0,0,1,.41.41,1.36,1.36,0,0,1,0,.26,3.64,3.64,0,0,1-.12.41l-4,12.86a1.3,1.3,0,0,1-.35.65,1,1,0,0,1-.64.16H29.25a1,1,0,0,1-.67-.17,1.26,1.26,0,0,1-.32-.67L25.67,3.64,23.11,14.34a1.26,1.26,0,0,1-.32.67,1,1,0,0,1-.67.17Zm21.36.44a11.28,11.28,0,0,1-2.56-.29,7.44,7.44,0,0,1-1.92-.67,1,1,0,0,1-.61-.93v-.84q0-.52.38-.52a.9.9,0,0,1,.31.06l.42.17a8.77,8.77,0,0,0,1.83.58,9.78,9.78,0,0,0,2,.2,4.48,4.48,0,0,0,2.43-.55,1.76,1.76,0,0,0,.86-1.57,1.61,1.61,0,0,0-.45-1.16A4.29,4.29,0,0,0,43,9.22l-2.41-.76A5.15,5.15,0,0,1,38,6.78a3.94,3.94,0,0,1-.83-2.41,3.7,3.7,0,0,1,.45-1.85,4.47,4.47,0,0,1,1.19-1.37A5.27,5.27,0,0,1,40.51.29,7.4,7.4,0,0,1,42.6,0a8.87,8.87,0,0,1,1.12.07q.57.07,1.08.19t.95.26a4.27,4.27,0,0,1,.7.29,1.59,1.59,0,0,1,.49.41.94.94,0,0,1,.15.55v.79q0,.52-.38.52a1.76,1.76,0,0,1-.64-.2,7.74,7.74,0,0,0-3.2-.64,4.37,4.37,0,0,0-2.21.47,1.6,1.6,0,0,0-.79,1.48,1.58,1.58,0,0,0,.49,1.18,4.94,4.94,0,0,0,1.83.92L44.55,7a5.08,5.08,0,0,1,2.57,1.6A3.76,3.76,0,0,1,47.9,11a4.21,4.21,0,0,1-.44,1.93,4.4,4.4,0,0,1-1.21,1.47,5.43,5.43,0,0,1-1.85.93A8.25,8.25,0,0,1,42.05,15.62Z"></path><path class="cls-2" d="M45.19,23.81C39.72,27.85,31.78,30,25,30A36.64,36.64,0,0,1,.22,20.57c-.51-.46-.06-1.09.56-.74A49.78,49.78,0,0,0,25.53,26.4,49.23,49.23,0,0,0,44.4,22.53C45.32,22.14,46.1,23.14,45.19,23.81Z"></path><path class="cls-2" d="M47.47,21.21c-.7-.9-4.63-.42-6.39-.21-.53.06-.62-.4-.14-.74,3.13-2.2,8.27-1.57,8.86-.83s-.16,5.89-3.09,8.35c-.45.38-.88.18-.68-.32C46.69,25.8,48.17,22.11,47.47,21.21Z"></path></svg>

</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1680274106"></script>
<script type="text/javascript" src="/js/auto-complete.js?1680274106"></script>
<script type="text/javascript">
    
        var baseurl = "\/vi";
    
</script>
<script type="text/javascript" src="/js/search.js?1680274106"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/vi/1-prerequisite/" title="Các bước chuẩn bị" class="dd-item 
        parent
        
        
        ">
      <a href="/vi/1-prerequisite/">
          <b>1. </b>Các bước chuẩn bị
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/vi/1-prerequisite/1-create-aws-account/" title="Tạo AWS Account trong AWS Organizations" class="dd-item 
        
        
        
        ">
      <a href="/vi/1-prerequisite/1-create-aws-account/">
          <b>1.1 </b>Tạo AWS Account trong AWS Organizations
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/1-prerequisite/2-configure-ou/" title="Thiết lập Organization Unit" class="dd-item 
        
        
        
        ">
      <a href="/vi/1-prerequisite/2-configure-ou/">
          <b>1.2 </b>Thiết lập Organization Unit
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/1-prerequisite/3-invite-aws-account/" title="Thêm AWS Account vào AWS Organization" class="dd-item 
        
        
        
        ">
      <a href="/vi/1-prerequisite/3-invite-aws-account/">
          <b>1.3 </b>Thêm AWS Account vào AWS Organization
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/1-prerequisite/4-switch-role/" title="Truy cập qua các AWS Account khác trong Organization" class="dd-item 
        parent
        active
        
        ">
      <a href="/vi/1-prerequisite/4-switch-role/">
          <b>1.4 </b>Truy cập qua các AWS Account khác trong Organization
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/2-setup-aws-sso/" title="Thiết lập AWS SSO" class="dd-item 
        
        
        
        ">
      <a href="/vi/2-setup-aws-sso/">
          <b>2. </b>Thiết lập AWS SSO
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/vi/2-setup-aws-sso/2.1-enable-sso/" title="Kích hoạt AWS SSO" class="dd-item 
        
        
        
        ">
      <a href="/vi/2-setup-aws-sso/2.1-enable-sso/">
          <b>2.1 </b>Kích hoạt AWS SSO
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/2-setup-aws-sso/2.2-add-user-group/" title="Thêm Users và Groups" class="dd-item 
        
        
        
        ">
      <a href="/vi/2-setup-aws-sso/2.2-add-user-group/">
          <b>2.2 </b>Thêm Users và Groups
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/2-setup-aws-sso/2.3-create-permissionset/" title="Tạo Permission Set" class="dd-item 
        
        
        
        ">
      <a href="/vi/2-setup-aws-sso/2.3-create-permissionset/">
          <b>2.3 </b>Tạo Permission Set
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/2-setup-aws-sso/2.4-add-permission/" title="Gán quyền" class="dd-item 
        
        
        
        ">
      <a href="/vi/2-setup-aws-sso/2.4-add-permission/">
          <b>2.4 </b>Gán quyền
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/3-test-permission/" title="Kiểm tra " class="dd-item 
        
        
        
        ">
      <a href="/vi/3-test-permission/">
          <b>3. </b>Kiểm tra 
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/4-clean-up/" title="Dọn dẹp tài nguyên" class="dd-item 
        
        
        
        ">
      <a href="/vi/4-clean-up/">
          <b>4. </b>Dọn dẹp tài nguyên
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="http://awsstudygroup.com"><i class='fab fa-aws'></i> AWS Study Group - Blog</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://www.facebook.com/groups/awsstudygroupfcj"><i class='fab fa-facebook'></i> AWS Study Group - Nhóm FB</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      
        <li>
          <a class="padding">
            <i class="fas fa-language fa-fw"></i>
          <div class="select-style">
            <select id="select-language" onchange="location = this.value;">
          
          
          
              
              
                  
                    
                    
                      <option id="en" value="/1-prerequisite/4-switch-role/">English</option>
                    
                  
              
                  
              
          
              
              
                  
              
                  
                    
                    
                      <option id="vi" value="/vi/1-prerequisite/4-switch-role/" selected>Tiếng Việt</option>
                    
                  
              
          
        </select>
        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          width="255px" height="255px" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255;" xml:space="preserve">
          <g>
            <g id="arrow-drop-down">
              <polygon points="0,63.75 127.5,191.25 255,63.75 		" />
            </g>
          </g>
        </svg>
        </div>
        </a>
        </li>
      
      
      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> Clear History</a></li>
      
      </ul>
    </section>
    
    <section id="footer">
      <left>
    
     <b> Workshop</b> <br>
    <img src="https://hitwebcounter.com/counter/counter.php?page=7831772&style=0038&nbdigits=9&type=page&initCount=0" title="Migrate" Alt="web counter"   border="0" /></a>  <br>
     <b> <a href="https://cloudjourney.awsstudygroup.com/">Cloud Journey</a></b> <br>
    <img src="https://hitwebcounter.com/counter/counter.php?page=7830807&style=0038&nbdigits=9&type=page&initCount=0" title="Total CLoud Journey" Alt="web counter"   border="0"   />
     
</left>
<left>
    <br>
    <br>
        <b> Last Updated </b> <br>
        <i><font color=orange>31-03-2023</font></i>
    </left>
    <left>
        <br>
        <br>
            <b> Team </b> <br>
            <i> <a href="https://www.linkedin.com/in/jotaguy"  style="color:orange">Gia Hưng </a> <br>
        </i>
        </left>

<script async defer src="https://buttons.github.io/buttons.js"></script>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/vi/'>AWS Single Sign-On</a> > <a href='/vi/1-prerequisite/'>Các bước chuẩn bị</a> > Truy cập qua các AWS Account khác trong Organization
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Truy cập qua các AWS Account khác trong Organization
            </h1>
          

        



	<p>Ở bước này, bạn sẽ đứng tại <strong>management account</strong> để truy cập vào các <strong>member account</strong> thông qua chức năng <strong>switch role</strong></p>
<p><strong>Nội dung</strong></p>
<ul>
<li><strong>switch role</strong> vào các <strong>member account</strong> được tạo bởi <strong>AWS Organization</strong> (bước 1.1)</li>
<li><strong>switch role</strong> vào các <strong>member account</strong> được mời tham gia <strong>AWS Organization</strong> (bước 1.3)</li>
</ul>
<h4 id="a-switch-role-vào-các-member-account-được-tạo-bởi-aws-organization">A) <strong>Switch role</strong> vào các <strong>member account</strong> được tạo bởi <strong>AWS Organization</strong></h4>
<ol>
<li>Đăng nhập vào <strong>management account</strong></li>
</ol>
<ul>
<li>
<p>Dùng <strong>IAM User</strong> để đăng nhập</p>
</li>
<li>
<p>Truy cập vào <strong>AWS Management Comsole</strong> và tìm dịch vụ <strong>AWS Organizations</strong> trong thanh tìm kiếm.</p>
</li>
<li>
<p>Sao chép Account ID (Có 12 con số &amp; xuất hiện phía dưới tên của Account) mà bạn muốn truy cập</p>
</li>
<li>
<p>Ở gốc bên phải, phía sau tên của Account, chọn dấu tam giác, Chọn<strong>Switch role</strong></p>
</li>
</ul>
<p><img src="/images/11/0000'.png?featherlight=false&amp;width=90pc" alt="AWS Account"></p>
<ul>
<li>
<p><strong>Lưu ý</strong>, nếu bạn đang dùng account <strong>root</strong>, bạn sẽ không thể nhìn thấy chức năng <strong>Switch role</strong></p>
</li>
<li>
<p>Nếu bạn chưa thành thạo việc tạo IAM User (có quyền Admin) để phục vụ cho bài lab này, vui lòng xem lại bài: <a href="https://000002.awsstudygroup.com/vi/1-introduction/">Quản trị quyền truy cập với AWS Identity and Access Management (AWS IAM)</a></p>
</li>
</ul>
<ol start="2">
<li><strong>Switch role</strong></li>
</ol>
<ul>
<li>Tại mục <strong>Account</strong>, dán Account ID mà bạn đã sao chép ở bước 1, vd: <code>999999999943</code></li>
<li>Tại mục <strong>Role</strong>, điền <strong>role name</strong> bạn đã dùng trong lúc tạo Account (tại bước 1.1), vd: <code>OrganizationAccountAccessRole</code> (đây là role name được khuyến nghị bởi AWS)</li>
<li>Tại mục <strong>Display Name</strong>, dù đây không phải thông tin bắt buộc, nhưng khuyến khích bạn đặt tên để dễ dàng nhận biết &amp; tránh việc truy cập vào nhầm môi trường! Trong thật tế sẽ có nhiều Account được switch. Vd: <code>FCJ-DEV</code></li>
<li>Tại mục color: hãy chọn màu mà bạn thích</li>
<li>Chọn <strong>Switch Role</strong></li>
</ul>
<p><strong>lưu ý</strong>: nếu bạn cần thay đổi <strong>Display Name</strong>, chỉ cần làm lại bước 2 và thêm tên mà bạn muốn</p>
<p><img src="/images/11/0003.png?featherlight=false&amp;width=90pc" alt="AWS Account"></p>
<ul>
<li>Kết quả:</li>
</ul>
<p><img src="/images/11/0004.png?featherlight=false&amp;width=90pc" alt="AWS Account"></p>
<p>Chúc mừng bạn đã Switch Role thành công!</p>
<ul>
<li>Kiểm tra xem bạn có quyền trên các dịch vụ phổ thông hay chưa</li>
</ul>
<p><img src="/images/11/0004'.png?featherlight=false&amp;width=90pc" alt="AWS Account"></p>
<h4 id="giaỉ-thích">Giaỉ thích:</h4>
<ul>
<li>
<p>Bạn có thể <strong>truy cập</strong> dễ dàng vào member account được tạo từ <strong>AWS Organizations</strong> &amp; có đầy đủ quyền admin vì:</p>
<ul>
<li>IAM User bạn dùng trong bước 1 có quyền admin.</li>
<li>Trong lúc khởi tạo account mới bằng <strong>AWS Organizations</strong>, với sự chấp thuận của bạn - AWS đã tự động thêm quyền admin: <strong>AdministratorAccess</strong> vào role <strong>OrganizationAccountAccessRole</strong>. Đối chiếu:</li>
</ul>
</li>
<li>
<p>Bạn đang đứng tại <strong>member accouunt với Display name: FCJ-Dev</strong>, trong khung tìm kiếm, gõ và chọn dịch vụ <strong>IAM</strong></p>
</li>
<li>
<p>Bên phải, chọn <strong>Roles</strong></p>
</li>
</ul>
<p><img src="/images/11/0005.png?featherlight=false&amp;width=90pc" alt="AWS Account"></p>
<ul>
<li>Chọn Role name: <strong>OrganizationAccountAccessRole</strong></li>
</ul>
<p><img src="/images/11/0006.png?featherlight=false&amp;width=90pc" alt="AWS Account"></p>
<ul>
<li>Bạn sẽ thấy quyền admin: <strong>AdministratorAccess</strong> với phần diễn giải <strong>Provides full access to AWS services and resources</strong></li>
</ul>
<p><img src="/images/11/0007.png?featherlight=false&amp;width=90pc" alt="AWS Account"></p>
<h4 id="mở-rộng">Mở rộng:</h4>
<p>Khi bạn đã làm theo bài: <a href="https://000002.awsstudygroup.com/vi/1-introduction/">Quản trị quyền truy cập với AWS Identity and Access Management (AWS IAM)</a> để tạo IAM User đăng nhập vào <strong>management account</strong> thì bạn cấp quyền admin: <strong>AdministratorAccess</strong> để thực hiện việc switch role, tức bạn không cần thêm quyền <strong>assume role</strong> (<a href="https://000002.awsstudygroup.com/vi/1-introduction/1.3-iam-role/"><strong>link giải thích</strong></a>) vì quyền admin đã bao hàm luôn quyền này.</p>
<p>Nhưng trong thật tế để đảm bảo tính <strong>least privilege</strong> cho việc cấp phát quyền tối thiểu, với vai trò quản trị viên, bạn chỉ nên cấp quyền <strong>assume role</strong> cho user được switch qua account - đại diện cho môi trường mà team cần.</p>
<p><strong>Ví dụ</strong>: <strong>AWS Organizations</strong> của bạn có 4 account chạy workload tương ứng cho 3 môi trường: Dev, Test, Produciton và acc thứ 4 là <strong>management account</strong> (được AWS khuyến nghị: không nên chạy bất kỳ Workload nào, chỉ dành cho việc consolidated billing)! Vì tính chất công việc, DevLead cần duy chuyển qua lại giữa 2 môi trường Dev, Test mà không cần đăng nhập bằng User Name, Password vào 2 tài khoản AWS!</p>
<p>Thì lúc này, việc switch role để di chuyển giữa 2 môi trường sẽ rất nhanh chóng và tiện lợi. Vậy với vai trò quản trị viên - bạn sẽ cấp cho Dev Lead một IAM User truy cập vào <strong>management account</strong> chỉ có quyền <strong>assume role</strong> của 2 môi trường Dev, Test để thực hiện việc switch nhưng không có bất kỳ quyền gì khác trên môi trường Production.</p>
<h4 id="thực-hành">Thực hành:</h4>
<ol start="3">
<li>Tạo <strong>User Groups</strong></li>
</ol>
<ul>
<li>Đứng tại <strong>management account</strong> thực hiện lại <a href="https://000002.awsstudygroup.com/vi/2-create-admin-user-and-group/2.1-create-admin-group/">mục 2.1 trong bài Quản trị quyền truy cập với IAM</a></li>
<li>Tại bước 4, <strong>User Group Name</strong> nhập tên Group (Ví dụ: DevGroup)</li>
<li>Chọn <strong>Create policy</strong>, một cửa sổ mới xuất hiện</li>
</ul>
<p><img src="/images/11/0008.png?featherlight=false&amp;width=90pc" alt="AWS Account"></p>
<ol start="4">
<li>Tạo <strong>Customer managed Policy</strong></li>
</ol>
<ul>
<li>Choose a service: gõ <strong>STS</strong> -&gt; tại bên trái, chọn <strong>STS</strong>
<ul>
<li><strong>STS</strong> là Security Token Service: là web service cho phép người dùng gửi request tạm thời và cấp quyền một cách giới hạn cho IAM user. Token có hiệu lực mặc định là 1 giờ</li>
</ul>
</li>
<li>Actions -&gt; Select actions -&gt; gõ <code>AssumeRole</code> -&gt; tại chính giữa, chọn <strong>AssumeRole</strong></li>
<li>Resources -&gt; Specific -&gt; Add ARN
<ul>
<li>Account *: điền member Account ID (tức ID mà bạn đã sao chép ở bước 1 phía trên) (vd: <code>999999999943</code>)</li>
<li>Role name with path *: điền role name tại bước 1.1 (vd: <code>OrganizationAccountAccessRole</code>)</li>
<li>Chọn <strong>Add</strong></li>
</ul>
</li>
<li>Chọn <strong>Next: Tags</strong></li>
</ul>
<p><img src="/images/11/0009.png?featherlight=false&amp;width=90pc" alt="AWS Account"></p>
<ul>
<li>Chọn <strong>Next: Review</strong></li>
<li>Name* : điền policy name (vd:<code>switch_role_999999999943</code>)</li>
<li>Chọn <strong>Create policy</strong></li>
</ul>
<p><img src="/images/11/00010.png?featherlight=false&amp;width=90pc" alt="AWS Account"></p>
<ol start="5">
<li>Gắn policy vừa tạo vào <strong>User Groups</strong></li>
</ol>
<ul>
<li>Quay lại trang <strong>Create user group</strong></li>
<li>Tại mục <strong>Attach permissions policies - Optional</strong>, chọn biểu tượng refesh</li>
</ul>
<p><img src="/images/11/00011.png?featherlight=false&amp;width=90pc" alt="AWS Account"></p>
<ul>
<li>Tại khung tìm kiếm, nhập: <strong>switch_role_999999999943</strong></li>
<li>Tích vào ô vuông</li>
<li>Chọn <strong>Create Group</strong></li>
</ul>
<p><img src="/images/11/00012.png?featherlight=false&amp;width=90pc" alt="AWS Account"></p>
<ol start="6">
<li>Tạo <strong>User</strong></li>
</ol>
<ul>
<li>Thực hiện lại <a href="https://000002.awsstudygroup.com/vi/2-create-admin-user-and-group/2.2-create-admin-user/">mục 2.2 trong bài Quản trị quyền truy cập với IAM</a></li>
<li>Tại bước 2, <strong>User name</strong> nhập: <strong>DevLead</strong>,</li>
<li>Tại bước 3, chọn <strong>DevGroup</strong></li>
<li>Hoàn thành các bước còn lại và kiểm tra IAM User vừa được tạo</li>
</ul>
<p><img src="/images/11/00013.png?featherlight=false&amp;width=90pc" alt="AWS Account"></p>
<p>-&gt; Vậy IAM User: DevLead đã được tạo &amp; có policy name: <strong>switch_role_999999999943</strong> được gắn thông qua nhóm: DevGroup</p>
<p><strong>Lưu ý</strong>: Bạn thấy rằng trong giao diện Users hay User Groups, đều có chức năng cho phép bạn gán quyền (<strong>Add permissions</strong>), nhưng theo best pratice:</p>
<ul>
<li>Bạn chỉ nên gán quyền vào User Groups</li>
<li>Rồi thêm User vào trong Group, lúc đó User sẽ tự động có đầy đủ các quyền mà bạn đã trao cho Groups</li>
</ul>
<p>-&gt; Điều này giúp bạn dễ dàng quản lý quyền ở mức tập trung theo nhóm, tránh việc cấp quyền theo user và khó khăn trong việc quản lý vì phải vào từng user để xem chính sách quyền nào mà ta đã từng trao.</p>
<ol start="7">
<li>Đăng nhập vào <strong>IAM User</strong> vừa được tạo</li>
</ol>
<p><img src="/images/11/00014.png?featherlight=false&amp;width=90pc" alt="AWS Account"></p>
<p>Kết quả:</p>
<p><img src="/images/11/00015.png?featherlight=false&amp;width=90pc" alt="AWS Account"></p>
<ol start="8">
<li>Thực hiện <strong>switch role</strong> qua <strong>member account</strong></li>
</ol>
<p><strong>lưu ý</strong>: bạn vừa đăng nhập vào IAM User nhưng vẫn thuộc <strong>management account</strong>, bây giờ bạn bắt đầu thực hiện <strong>switch role</strong> qua <strong>member account</strong>.</p>
<ul>
<li>Thực hiện lại bước 2 phía trên</li>
</ul>
<p><img src="/images/11/00016.png?featherlight=false&amp;width=90pc" alt="AWS Account"></p>
<p>Chúc mừng bạn đã <strong>switch role</strong> qua <strong>member account</strong> (ID: 999999999943) với IAM User DevLead</p>
<p><img src="/images/11/00017.png?featherlight=false&amp;width=90pc" alt="AWS Account"></p>
<p>Bạn có thể dùng chức năng <strong>Create an AWS account</strong> để tạo ra acc cho môi trường test và làm lại từ bước 3 đến bước 8 để switch role qua môi trường Test với ID Account tương ứng</p>
<h4 id="b-switch-role-vào-các-member-account-được-mời-tham-gia-aws-organization">B) <strong>Switch role</strong> vào các <strong>member account</strong> được mời tham gia <strong>AWS Organization</strong></h4>
<p>Khi xem lại các mục:</p>
<ul>
<li>1.1 Tạo AWS Account trong AWS Organizations</li>
<li>1.3 Thêm AWS Account vào AWS Organization</li>
</ul>
<p>-&gt; Bạn sẽ thấy chức năng tạo AWS Account trong AWS Organizations (<strong>Create an AWS account</strong>) có sẵn phần tạo IAM role để management account dùng cho việc truy cập resources vào member account bằng cách <strong>Switch role</strong></p>
<p>-&gt; Nhưng điều trên hoàn toàn không có trong chức năng thêm AWS Account vào AWS Organization (<strong>Invite an existing AWS account</strong>), vậy bạn cần thêm IAM Role cho AWS Account đã được mời.</p>
<p><img src="/images/12/0001.png?featherlight=false&amp;width=90pc" alt="AWS Account"></p>
<ol>
<li>Tạo Role có quyền admin</li>
</ol>
<ul>
<li>
<p>Dùng <strong>member account</strong> mà bạn đã tham gia vào <strong>AWS Organizations</strong> trong mục [1.3]</p>
</li>
<li>
<p>Truy cập vào <strong>AWS Management Comsole</strong> và tìm dịch vụ <strong>IAM</strong> trong thanh tìm kiếm, chọn <strong>Roles</strong>, chọn <strong>Create role</strong></p>
</li>
</ul>
<p><img src="/images/12/0003.png?featherlight=false&amp;width=90pc" alt="AWS Account"></p>
<ul>
<li>Chọn <strong>AWS account</strong></li>
<li>Chọn <strong>Another AWS account</strong></li>
<li>Điền Account ID của <strong>management account</strong> vào khung, vd: <strong>999999999963</strong></li>
<li>Chọn Next</li>
</ul>
<p><img src="/images/12/0004.png?featherlight=false&amp;width=90pc" alt="AWS Account"></p>
<ul>
<li>Tại mục <strong>Permissions policies</strong>, nhập: <code>AdministratorAccess</code>, nhấn enter</li>
<li>Tích vào ô vuông AdministratorAccess</li>
<li>chọn Next</li>
</ul>
<p><img src="/images/12/0005.png?featherlight=false&amp;width=90pc" alt="AWS Account"></p>
<ul>
<li>Role name: nhập <code>OrganizationAccountAccessRole</code></li>
<li>Kéo xuống cuối trang, chọn <strong>Create role</strong></li>
</ul>
<p><img src="/images/12/0006.png?featherlight=false&amp;width=90pc" alt="AWS Account"></p>
<ul>
<li>Kiểm tra role vừa tạo, sao chép Account ID <strong>member account</strong> (ID: 888800009920) bằng cách nhấn vào hình vuông</li>
</ul>
<p><img src="/images/12/0007.png?featherlight=false&amp;width=90pc" alt="AWS Account"></p>
<ol start="2">
<li>Thực hiện switch role</li>
</ol>
<ul>
<li>
<p>Đăng nhập vào <strong>management account</strong> (như bước 1 và 2 trong phần A)</p>
</li>
<li>
<p>Sổ dấu tam giác phía trên cùng bên tay trái - cạnh acc name, chọn <strong>Switch role</strong></p>
</li>
</ul>
<p><img src="/images/12/0008.png?featherlight=false&amp;width=90pc" alt="AWS Account"></p>
<ul>
<li>Tại mục <strong>Account</strong>, dán Account ID mà bạn đã sao chép ở bước 1, vd: <code>888800009920</code></li>
<li>Tại mục <strong>Role</strong>, điền <strong>role name</strong> bạn đã dùng trong lúc tạo Account (tạo bước 1), vd: <code>OrganizationAccountAccessRole</code></li>
<li>Tại mục <strong>Display Name</strong>, dù đây không phải thông tin bắt buộc, nhưng khuyến khích bạn đặt tên để dễ dàng nhận biết &amp; tránh việc truy cập vào nhầm môi trường! Trong thật tế sẽ có nhiều Account được switch. Vd: <code>FCJ_Invite_Acc</code></li>
<li>Tại mục color: hãy chọn màu mà bạn thích</li>
<li>Chọn <strong>Switch Role</strong></li>
</ul>
<p><img src="/images/12/0009.png?featherlight=false&amp;width=90pc" alt="AWS Account"></p>
<ul>
<li>Chúc mừng, bằng cách Switch Role - bạn di chuyển thành công qua <strong>member account</strong> đã được mời vào <strong>AWS Organizations</strong></li>
</ul>
<p><img src="/images/12/00010.png?featherlight=false&amp;width=90pc" alt="AWS Account"></p>
<p><strong>Đúc kết</strong>: Từ bước 1.1 đến bước 1.4, chúng ta đã thấy được management account sẽ là acc quản trị trong dịch vụ AWS Organization và các member account sẽ là các acc thành viên thường trực.
Ngoài ra, để member account xuất hiện trong Organization, chúng ta có hai cách:</p>
<ol>
<li>Tạo acc mới bằng chức năng: Create an AWS account</li>
<li>Thêm acc đã tồn tại bằng chức năng: Invite an existing AWS account</li>
</ol>
<p>Bên cạnh đó, chúng ta có thể đứng từ management account để truy cập vào member account qua chức năng switch role và với mỗi cách trong 2 cách trên, chúng ta lại cần các điều kiện khác nhau để switch role thành công:</p>
<ol>
<li>
<p>Với cách <strong>Create an AWS account</strong>, việc switch role sẽ khá là đơn giản vì trong lúc khởi tạo member account chúng ta đã cho phép AWS tự động thêm role name <strong>OrganizationAccountAccessRole</strong> với quyền <strong>AdministratorAccess</strong>. Ngoài ra, chúng ta cần cấp quyền <strong>assume role</strong> tương ứng với member account ID cho IAM User thuộc management account</p>
</li>
<li>
<p>Với cách <strong>Invite an existing AWS account</strong>, việc switch role sẽ khó khăn hơn! Chúng ta cần tạo role name <strong>OrganizationAccountAccessRole</strong> và gán quyền <strong>AdministratorAccess</strong> cho account ID của management account
Ngoài ra, chúng ta cần cấp quyền <strong>assume role</strong> tương ứng với member account ID cho IAM User thuộc management account</p>
</li>
</ol>
<p>Tuy nhiên, switch role không phải là cách duy nhất để truy cập vào các member acount. Tại các bước trong mục số 2, các bạn sẽ khám phá ra một cách truy cập khác thông qua việc thiết lập  AWS SSO.</p>





<footer class=" footline" >
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/vi/1-prerequisite/3-invite-aws-account/" title="Thêm AWS Account vào AWS Organization"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/vi/2-setup-aws-sso/" title="Thiết lập AWS SSO" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1680274106"></script>
    <script src="/js/perfect-scrollbar.min.js?1680274106"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1680274106"></script>
    <script src="/js/jquery.sticky.js?1680274106"></script>
    <script src="/js/featherlight.min.js?1680274106"></script>
    <script src="/js/highlight.pack.js?1680274106"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1680274106"></script>
    <script src="/js/learn.js?1680274106"></script>
    <script src="/js/hugo-learn.js?1680274106"></script>

    <link href="/mermaid/mermaid.css?1680274106" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1680274106"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-158079754-2', 'auto');
  ga('send', 'pageview');

</script>
  </body>
</html>
